# Analyzer
The analyzer scripts can automate the extraction of useful information about 
Defects4J Project, like the coverage of students' tests for tool, or
the extraction of all mutants generated by a tool.

The supported projects are Cli, Gson and Lang.

The `bulk_analyzer.py` has the same command line interface of `analyzer.py` (explained below), with the exception of missing 
all optional arguments but `--tools`, `--verbose`, `--stdout` and `--stderr`; the other arguments are automatically set by the script
in a loop, executing the specified action over all possible combinations of students groups' testclasses that worked on that project
with that tool, with and without the developer single testclass.

## Usage
The usage is `python3 analyzer.py <action> <path>`.

Check the `--help` to see all commands.

## Actions
All the actions below must be provided lower-case to the CLI. 

### Backup
Backup the current testsuite. Is automatically performed when executing a testsuite changing command, like Coverage.

### Restore
Restore the backupped testsuite.

### Coverage
This action will launch `defects4j coverage` against the student test suites related
to a single (or every) tool, obtaining the cobertura's coverage xmls about line and
branch coverage of the test suite provided.

### Run
This action will launch specified tools against the selected testsuite, just collecting tool's output.

### Mutants
This action will launch specified tools against a dummy test suite, containing only
an empty test function. This serves in reporting all the mutants generated by the tool.

PS: Judy won't generate any mutant with this method.

### Mutscore
This action will launch specified tools against the selected testsuite, and then gets from the tool's output
the mutation score; furthermore, a JSON containing mutation score and numbers of mutants (generated, live and killed) is 
automatically generated inside `tools_output/<tool>` directory.

This path is found inside the Subject path provided as argument.

## Arguments
### Required args

#### action
Must be one of the aforementioned actions.

#### path
Must be the path of a checked out Defects4j project.

### Optional args

#### --tools
Specify a list of tools (space separated) to use during the elaboration of the action.
Valid values are `judy`, `jumble`, `major`, `pit`.

If not specified, every tool will be used.

#### --with-dev
Run the selected action including the developers' tests. Mutually exclusive with `--with-single-dev` and `--with-relevant-dev`.

Defaults to false.

#### --with-single-dev
Run the selected action including only the single developers' test created for the relevant class under study;
by convention class `package.to.Class` will have the test class `package.to.ClassTest`.
Mutually exclusive with `--with-dev` and `--with-relevant-dev`.

Defaults to false.

#### --with-relevant-dev
Run the selected action including the relevant developers' tests, found inside `files/<project>/relevant/tests.txt`.
Mutually exclusive with `--with-dev` and `--with-single-dev`.

Defaults to false.

#### --group
Run the selected action with the only specified group. The precondition is
that this group has worked with both the Project and the Tool.

If this value is null, every group that worked with the Project and Tool specified will be used.
Mutually exclusive with `--no-groups`.

Defaults to null.

#### --no-groups
Run the selected action excluding all the students' tests. 
Mutually exclusive with `--group`.

Defaults to false.

#### --skip-setup
Skip the setup of the tool (i.e. overwritting current testsuite with students' one),
executing the specified action against the current testsuite found in the right folder. 

#### -v, --verbose
Increase the verbosity of output.

#### --stdout
Enable the stdout of the selected tools.

#### --stderr
Enable the stderr of the selected tools.
